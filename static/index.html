<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Goose & Maverick</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    #maverick-chatbox::-webkit-scrollbar { width: 6px; }
    #maverick-chatbox::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
  </style>
</head>
<body class="bg-gradient-to-br from-sky-50 to-slate-100 font-sans min-h-screen flex flex-col items-center justify-center p-8">
  <div class="w-full max-w-4xl space-y-10">
    <!-- Goose Card Scanner and Goose Vision Already Here -->
    <!-- ...existing Goose UI from previous update... -->
  </div>

  <!-- Floating Maverick Button -->
  <button onclick="toggleMaverick()" class="fixed bottom-6 right-6 z-50 bg-gradient-to-r from-blue-600 to-cyan-600 text-white p-4 rounded-full shadow-xl hover:scale-105 transition">
    ðŸ’¬
  </button>

  <!-- Maverick Chat Widget -->
  <div id="maverickWindow" class="fixed bottom-24 right-6 w-80 max-h-[80vh] bg-white border rounded-2xl shadow-2xl overflow-hidden hidden flex flex-col z-40">
    <div class="bg-gradient-to-r from-blue-700 to-cyan-600 text-white px-4 py-3 flex justify-between items-center">
      <div>
        <p class="font-semibold">Chat with Maverick</p>
        <p class="text-sm text-cyan-100">Weâ€™re online</p>
      </div>
      <button onclick="toggleMaverick()" class="text-white text-xl">Ã—</button>
    </div>
    <div id="maverick-chatbox" class="flex-1 overflow-y-auto p-3 space-y-2 text-sm bg-white"></div>
    <div class="border-t p-3 flex items-center gap-2">
      <input id="maverickInput" type="text" placeholder="Ask anything CREâ€¦" class="flex-1 border rounded-full px-4 py-2 text-sm outline-none">
      <button onclick="sendToMaverick()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-full">âž¤</button>
    </div>
  </div>

  <script>
    function toggleMaverick() {
      document.getElementById('maverickWindow').classList.toggle('hidden');
    }

    async function sendToMaverick() {
      const input = document.getElementById('maverickInput');
      const chatbox = document.getElementById('maverick-chatbox');
      const message = input.value.trim();
      if (!message) return;
      
      // Show user message
      chatbox.innerHTML += `<div class='text-right'><span class='inline-block bg-blue-100 text-blue-900 px-3 py-2 rounded-lg'>${message}</span></div>`;
      input.value = '';
      chatbox.scrollTop = chatbox.scrollHeight;

      // Send to backend
      const response = await fetch('/ask', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ message })
      });
      const result = await response.json();

      chatbox.innerHTML += `<div><span class='inline-block bg-gray-100 text-gray-900 px-3 py-2 rounded-lg'>${result.answer}</span></div>`;
      chatbox.scrollTop = chatbox.scrollHeight;
    }
  </script>
</body>
</html>
